= Documentation Technique - Application IoT
:toc: left
:toc-title: Table des matières
:sectnums!:
:imagesdir: images

**Application IoT de surveillance environnementale**  
**Version :** 1.0  
**Date :** Janvier 2024  
**Équipe :** Groupe 9  

== Présentation de l'application

=== Description générale 
L'application IoT permet la surveillance des conditions environnementales en temps réel via des capteurs AM107. Elle collecte et analyse les données de température, humidité, CO2 et autres métriques environnementales. L'application génère des alertes lorsque les seuils configurés sont dépassés et permet une visualisation des données historiques.

=== Architecture générale
L'application est divisée en deux composants principaux :

1. **Script Python (prg.py)**
- Gère la connexion MQTT au broker mqtt.iut-blagnac.fr
- Collecte les données des capteurs AM107
- Écrit les données dans des fichiers JSON (donnees.json et alert.json)
- Génère les alertes selon les seuils configurés

2. **Interface JavaFX**
- Permet la configuration des paramètres (serveur MQTT, seuils, etc.)
- Affiche les données en temps réel
- Visualise l'historique des alertes
- Gère la configuration via config.ini

== Implémentation

=== Configuration (config.ini)
Le fichier config.ini contient tous les paramètres de l'application :
- Section MQTT : serveur et topics
- Section variables : métriques à surveiller  
- Section seuils_capteur : valeurs limites pour les alertes
- Section OUTPUT : configuration des fichiers de sortie

=== Script Python (prg.py)
Fonctionnalités principales :
- Lecture de la configuration depuis config.ini
- Connexion MQTT et souscription aux topics
- Traitement des données reçues
- Génération d'alertes 
- Écriture dans les fichiers JSON

=== Interface Java
Classes principales :
- `ConfigViewController.java` : Gestion de l'interface de configuration
- `ConfigController.java` : Logique de configuration et lancement du script Python
- `EnergieExtraction.java` : Traitement des données JSON

== Installation et Déploiement

=== Prérequis
- Python 3.x avec les modules : paho-mqtt, json, configparser
- Java 17 avec JavaFX
- Fichier config.ini configuré

=== Déploiement
1. Placer les fichiers dans un répertoire commun :
    - prg.py
    - config.ini  
    - Application Java compilée

2. Configuration :
    - Éditer config.ini selon les besoins
    - Vérifier les droits d'accès aux fichiers

3. Lancement :
    - L'interface Java lance automatiquement le script Python
    - Les données sont écrites dans donnees.json et alert.json
